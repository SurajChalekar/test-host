import{_ as Be,r as h,c as xe,o as $e,a as m,b as C,d as l,e as Qe,t as N,f as V,n as z,g as E,F as Y,h as Z}from"./index-acepSk_i.js";const Te={class:"puzzles-page"},Fe={class:"puzzles-hero position-relative overflow-hidden"},Ne={class:"container position-relative z-3"},Ee={class:"row justify-content-center text-center"},Oe={class:"col-lg-8"},Ue={class:"hero-content py-5"},Le={class:"hero-stats d-flex justify-content-center gap-4 flex-wrap"},De={class:"stat-item"},Ve={class:"stat-number"},We={class:"stat-item"},je={class:"stat-number"},He={class:"puzzle-content py-5"},Ae={class:"container"},Ge={class:"row justify-content-center"},Je={class:"col-lg-10"},Xe={class:"puzzle-info-card mb-4"},Ye={class:"row align-items-center"},Ze={key:0,class:"status-message mt-3 text-center"},Ie={class:"chess-container"},es={class:"board-wrapper"},ss={class:"chess-board",ref:"chessBoard"},ts=["onClick"],as=["data-piece"],ls={key:1,class:"move-indicator"},os={class:"board-coordinates"},ns={class:"files"},is={class:"ranks"},us={key:0,class:"promotion-dialog-overlay"},cs={class:"promotion-dialog"},rs={class:"promotion-pieces"},vs={__name:"Puzzles",setup(ds){const B=h(0),I=h(0),P=h(null),v=h(""),d=h(""),p=h(""),g=h("white"),x=h([]),ee=h([]),O=h(!0),_=h(!1),y=h(!1),w=h(null),$=h(!1),Q=h(null),M=h(null),k=h({whiteKingMoved:!1,blackKingMoved:!1,whiteKingsideRookMoved:!1,whiteQueensideRookMoved:!1,blackKingsideRookMoved:!1,blackQueensideRookMoved:!1}),de=["a","b","c","d","e","f","g","h"],pe=[8,7,6,5,4,3,2,1],W=h([{id:1,title:"Checkmate in 2",description:"White to play and force checkmate in 2 moves.",difficulty:"Intermediate",theme:"Checkmate",rating:1200,board:["r","","b","q","k","","","r","p","p","p","","","p","p","p","","","n","","","n","","","","","","p","p","","","","","","","P","P","","","","","","N","","","N","","","P","P","P","","","P","P","P","R","","B","Q","K","B","","R"],solution:["Qd8+","Rxd8","Rxd8#"]},{id:2,title:"Fork Tactic",description:"Find the knight fork that wins material.",difficulty:"Beginner",theme:"Tactics",rating:900,board:["r","n","b","q","k","b","","r","p","p","p","p","","p","p","p","","","","","","n","","","","","","","p","","","","","","","","P","","","","","","N","","","","","","P","P","P","P","","P","P","P","R","","B","Q","K","B","N","R"],solution:["Nd5"]}]),se=xe(()=>W.value[B.value]||W.value[0]),u=h([]),j=()=>{const s=se.value;u.value=[];for(let e=0;e<64;e++)u.value.push({piece:s.board[e]||null,selected:!1});g.value="white",x.value=[],ee.value=[],O.value=!0,_.value=!1,y.value=!1,w.value=null,$.value=!1,Q.value=null,M.value=null,k.value={whiteKingMoved:!1,blackKingMoved:!1,whiteKingsideRookMoved:!1,whiteQueensideRookMoved:!1,blackKingsideRookMoved:!1,blackQueensideRookMoved:!1}},K=s=>s&&s===s.toUpperCase(),H=s=>s&&s===s.toLowerCase(),te=s=>s?g.value==="white"?K(s):H(s):!1,T=s=>{const e=Math.floor(s/8),t=s%8;return{row:e,col:t}},f=(s,e)=>s<0||s>7||e<0||e>7?-1:s*8+e,F=s=>u.value[s]&&u.value[s].piece!==null,U=(s,e)=>{const t=u.value[s]?.piece;return t?e?H(t):K(t):!1},ae=(s,e)=>{const t=u.value[s]?.piece;return t?e?K(t):H(t):!1},fe=s=>{const e=s?"K":"k";for(let t=0;t<64;t++)if(u.value[t]?.piece===e)return t;return-1},le=(s,e)=>{for(let t=0;t<64;t++){const a=u.value[t]?.piece;if(!a)continue;const o=K(a);if(o!==e)continue;const{row:i,col:c}=T(t);let n=[];switch(a.toLowerCase()){case"p":n.push(...he(i,c,o));break;case"r":n.push(...A(i,c,o));break;case"n":n.push(...ie(i,c,o));break;case"b":n.push(...G(i,c,o));break;case"q":n.push(...ue(i,c,o));break;case"k":n.push(...ce(i,c,o));break}if(n.some(r=>r.index===s))return!0}return!1},q=s=>{const e=fe(s);return e===-1?!1:le(e,!s)},oe=(s,e,t)=>{const a=u.value[s]?.piece,o=u.value[e]?.piece;u.value[s].piece=null,u.value[e].piece=a;const i=q(t);return u.value[s].piece=a,u.value[e].piece=o,i},he=(s,e,t)=>{const a=[],o=t?-1:1,i=f(s+o,e-1);i!==-1&&a.push({index:i});const c=f(s+o,e+1);return c!==-1&&a.push({index:c}),a},ne=(s,e,t)=>{const{row:a,col:o}=T(s);if(e){if(k.value.whiteKingMoved||t&&k.value.whiteKingsideRookMoved||!t&&k.value.whiteQueensideRookMoved)return!1}else if(k.value.blackKingMoved||t&&k.value.blackKingsideRookMoved||!t&&k.value.blackQueensideRookMoved)return!1;if(a!==(e?7:0)||o!==4)return!1;const n=f(a,t?7:0);if(u.value[n]?.piece!==(e?"R":"r"))return!1;const D=t?5:1,Ke=t?6:3;for(let R=D;R<=Ke;R++){const X=f(a,R);if(F(X))return!1}if(q(e))return!1;const qe=4,Se=t?6:2,ve=t?1:-1;for(let R=qe;R!==Se+ve;R+=ve){const X=f(a,R);if(le(X,!e))return!1}return!0},ke=(s,e)=>{const t=[],{row:a}=T(s);return ne(s,e,!0)&&t.push({index:f(a,6),isCastling:!0,isKingside:!0}),ne(s,e,!1)&&t.push({index:f(a,2),isCastling:!0,isKingside:!1}),t},ge=(s,e,t)=>{const a=[],o=t?-1:1,i=t?6:1,c=f(s+o,e);if(c!==-1&&!F(c)&&(a.push({index:c}),s===i)){const b=f(s+o*2,e);b!==-1&&!F(b)&&a.push({index:b,isDoublePawnMove:!0})}const n=f(s+o,e-1);n!==-1&&U(n,t)&&a.push({index:n});const r=f(s+o,e+1);if(r!==-1&&U(r,t)&&a.push({index:r}),w.value!==null){const b=Math.floor(w.value/8),D=w.value%8;s+o===b&&(e-1===D&&a.push({index:w.value,isEnPassant:!0}),e+1===D&&a.push({index:w.value,isEnPassant:!0}))}return a},A=(s,e,t)=>{const a=[],o=[[0,1],[0,-1],[1,0],[-1,0]];for(const[i,c]of o)for(let n=1;n<8;n++){const r=f(s+i*n,e+c*n);if(r===-1)break;if(!F(r))a.push({index:r});else{U(r,t)&&a.push({index:r});break}}return a},ie=(s,e,t)=>{const a=[],o=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[i,c]of o){const n=f(s+i,e+c);n!==-1&&!ae(n,t)&&a.push({index:n})}return a},G=(s,e,t)=>{const a=[],o=[[1,1],[1,-1],[-1,1],[-1,-1]];for(const[i,c]of o)for(let n=1;n<8;n++){const r=f(s+i*n,e+c*n);if(r===-1)break;if(!F(r))a.push({index:r});else{U(r,t)&&a.push({index:r});break}}return a},ue=(s,e,t)=>[...A(s,e,t),...G(s,e,t)],ce=(s,e,t)=>{const a=[],o=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];for(const[i,c]of o){const n=f(s+i,e+c);n!==-1&&!ae(n,t)&&a.push({index:n})}return a},be=s=>{const e=u.value[s]?.piece;if(!e)return[];const{row:t,col:a}=T(s),o=K(e);let i=[];switch(e.toLowerCase()){case"p":i.push(...ge(t,a,o));break;case"r":i.push(...A(t,a,o));break;case"n":i.push(...ie(t,a,o));break;case"b":i.push(...G(t,a,o));break;case"q":i.push(...ue(t,a,o));break;case"k":i.push(...ce(t,a,o)),i.push(...ke(s,o));break}return i.filter(n=>!oe(s,n.index,o)).filter(n=>n.index>=0&&n.index<64)},re=s=>{const e=be(s);x.value=e},J=s=>x.value.some(e=>e.index===s),we=s=>{const e=Math.floor(s/8),t=s%8,a=(e+t)%2===0;let o=["chess-square"];o.push(a?"light-square":"dark-square"),u.value[s].selected&&o.push("selected-square"),J(s)&&o.push("valid-move-square");const i=u.value[s]?.piece;return(i==="K"&&_.value||i==="k"&&y.value)&&o.push("king-in-check"),o},me=s=>s?s===s.toUpperCase()?"white-piece":"black-piece":"",Ce=(s,e)=>{e==="K"?k.value.whiteKingMoved=!0:e==="k"?k.value.blackKingMoved=!0:e==="R"?(s===63&&(k.value.whiteKingsideRookMoved=!0),s===56&&(k.value.whiteQueensideRookMoved=!0)):e==="r"&&(s===7&&(k.value.blackKingsideRookMoved=!0),s===0&&(k.value.blackQueensideRookMoved=!0))},Pe=(s,e)=>{const t=u.value[s].piece,a=u.value[e].piece,o=x.value.find(c=>c.index===e),i=K(t);if(oe(s,e,i)){v.value="⚠️ Illegal move! This would leave your king in check.",d.value="alert-danger",p.value="fas fa-ban",S();return}if(Ce(s,t),w.value,w.value=null,o?.isEnPassant){const n=e+(i?1:-1)*8,r=u.value[n].piece;u.value[s].piece=null,u.value[e].piece=t,u.value[n].piece=null,v.value=`En passant! ${t.toUpperCase()} captures ${r.toUpperCase()}`,d.value="alert-success",p.value="fas fa-chess-pawn"}else if(o?.isCastling){const{row:c}=T(s);if(u.value[s].piece=null,u.value[e].piece=t,o.isKingside){const n=f(c,7),r=f(c,5),b=u.value[n].piece;u.value[n].piece=null,u.value[r].piece=b,v.value="♔ Castled kingside! O-O",d.value="alert-success",p.value="fas fa-chess-rook"}else{const n=f(c,0),r=f(c,3),b=u.value[n].piece;u.value[n].piece=null,u.value[r].piece=b,v.value="♔ Castled queenside! O-O-O",d.value="alert-success",p.value="fas fa-chess-rook"}}else{if(t.toLowerCase()==="p"&&o?.isDoublePawnMove){const n=i?1:-1;w.value=e+n*8}u.value[s].piece=null,u.value[e].piece=t;const c=Math.floor(e/8);if(t.toLowerCase()==="p"&&(c===0||c===7)){$.value=!0,Q.value=e,M.value=i,O.value=!1,v.value="👑 Choose a piece for promotion!",d.value="alert-info",p.value="fas fa-crown";return}a?(v.value=`${t.toUpperCase()} captures ${a.toUpperCase()}!`,d.value="alert-success",p.value="fas fa-times"):(v.value=`${g.value==="white"?"Black":"White"} to move`,d.value="alert-info",p.value="fas fa-chess")}ee.value.push({from:s,to:e,piece:t,captured:a,turn:g.value,castling:o?.isCastling||!1,enPassant:o?.isEnPassant||!1}),S(),g.value=g.value==="white"?"black":"white",_.value=q(!0),y.value=q(!1),_.value?(v.value+=" - White King in Check! ♔",d.value="alert-warning",p.value="fas fa-exclamation-triangle"):y.value&&(v.value+=" - Black King in Check! ♚",d.value="alert-warning",p.value="fas fa-exclamation-triangle")},Me=s=>{if(!O.value||$.value)return;const e=u.value[s];P.value===null?e.piece&&te(e.piece)?(P.value=s,e.selected=!0,re(s),v.value=`${g.value==="white"?"White":"Black"} to move`,d.value="alert-info",p.value="fas fa-chess"):e.piece&&(v.value=`It's ${g.value}'s turn!`,d.value="alert-warning",p.value="fas fa-exclamation-triangle"):P.value===s?S():J(s)?Pe(P.value,s):e.piece&&te(e.piece)?(S(),P.value=s,e.selected=!0,re(s)):(v.value="Invalid move! Try again.",d.value="alert-danger",p.value="fas fa-times")},S=()=>{P.value!==null&&(u.value[P.value].selected=!1),P.value=null,x.value=[]},ze=()=>{S(),j(),v.value="Puzzle reset! White to move.",d.value="alert-info",p.value="fas fa-undo"},Re=()=>{const s=se.value.solution[0];v.value=`Hint: Try ${s}`,d.value="alert-info",p.value="fas fa-lightbulb"},_e=()=>{v.value="Good move! Keep going...",d.value="alert-success",p.value="fas fa-check-circle"},ye=()=>{B.value<W.value.length-1?B.value++:B.value=0,S(),j(),v.value="New puzzle loaded! White to move.",d.value="alert-success",p.value="fas fa-puzzle-piece",I.value++},L=s=>{if(Q.value===null)return;const e=M.value?s.toUpperCase():s.toLowerCase();u.value[Q.value].piece=e,$.value=!1,O.value=!0,v.value=`Pawn promoted to ${s.toUpperCase()}! 👑`,d.value="alert-success",p.value="fas fa-crown",Q.value=null,M.value=null,g.value=g.value==="white"?"black":"white",_.value=q(!0),y.value=q(!1),_.value?(v.value+=" - White King in Check! ♔",d.value="alert-warning"):y.value&&(v.value+=" - Black King in Check! ♚",d.value="alert-warning")};return $e(()=>{document.title="IISER-TVM Chess Club - Puzzles",j(),v.value="White to move. Select a piece to start!",d.value="alert-info",p.value="fas fa-chess"}),(s,e)=>(C(),m("div",Te,[l("section",Fe,[e[7]||(e[7]=l("div",{class:"hero-background"},null,-1)),e[8]||(e[8]=l("div",{class:"chess-pattern-bg"},null,-1)),l("div",Ne,[l("div",Ee,[l("div",Oe,[l("div",Ue,[e[6]||(e[6]=Qe('<div class="hero-badge mb-4" data-v-a60b3fe9><span class="badge bg-gradient-warning px-4 py-3 fs-6 rounded-pill" data-v-a60b3fe9><i class="fas fa-brain me-2" data-v-a60b3fe9></i>Mind Sharpening Challenges </span></div><h1 class="hero-title mb-4" data-v-a60b3fe9><span class="chess-icon" data-v-a60b3fe9>🧩</span><span class="text-glow" data-v-a60b3fe9>Chess Puzzles</span></h1><p class="hero-subtitle mb-4" data-v-a60b3fe9> Test your tactical prowess with mind-bending puzzles. Every move matters, every solution reveals mastery. </p>',3)),l("div",Le,[l("div",De,[l("div",Ve,N(B.value+1),1),e[4]||(e[4]=l("div",{class:"stat-label"},"Current Puzzle",-1))]),l("div",We,[l("div",je,N(I.value),1),e[5]||(e[5]=l("div",{class:"stat-label"},"Solved",-1))])])])])])])]),l("section",He,[l("div",Ae,[l("div",Ge,[l("div",Je,[l("div",Xe,[l("div",Ye,[v.value?(C(),m("div",Ze,[l("div",{class:z([d.value,"alert"])},[l("i",{class:z([p.value,"me-2"])},null,2),E(N(v.value),1)],2)])):V("",!0)]),l("div",Ie,[l("div",es,[l("div",ss,[(C(!0),m(Y,null,Z(u.value,(t,a)=>(C(),m("div",{key:a,class:z(we(a)),onClick:o=>Me(a)},[t.piece?(C(),m("div",{key:0,class:z([me(t.piece),"chess-piece"]),"data-piece":t.piece},null,10,as)):V("",!0),J(a)?(C(),m("div",ls)):V("",!0)],10,ts))),128))],512),l("div",os,[l("div",ns,[(C(),m(Y,null,Z(de,t=>l("span",{key:t,class:"file-label"},N(t),1)),64))]),l("div",is,[(C(),m(Y,null,Z(pe,t=>l("span",{key:t,class:"rank-label"},N(t),1)),64))])])])])]),$.value?(C(),m("div",us,[l("div",cs,[e[13]||(e[13]=l("h3",{class:"text-center mb-3"},"Choose Promotion Piece",-1)),l("div",rs,[l("button",{onClick:e[0]||(e[0]=t=>L("q")),class:"promotion-btn"},[l("div",{class:z([M.value?"white-piece":"black-piece","promotion-piece"])},"♕",2),e[9]||(e[9]=l("span",null,"Queen",-1))]),l("button",{onClick:e[1]||(e[1]=t=>L("r")),class:"promotion-btn"},[l("div",{class:z([M.value?"white-piece":"black-piece","promotion-piece"])},"♖",2),e[10]||(e[10]=l("span",null,"Rook",-1))]),l("button",{onClick:e[2]||(e[2]=t=>L("b")),class:"promotion-btn"},[l("div",{class:z([M.value?"white-piece":"black-piece","promotion-piece"])},"♗",2),e[11]||(e[11]=l("span",null,"Bishop",-1))]),l("button",{onClick:e[3]||(e[3]=t=>L("n")),class:"promotion-btn"},[l("div",{class:z([M.value?"white-piece":"black-piece","promotion-piece"])},"♘",2),e[12]||(e[12]=l("span",null,"Knight",-1))])])])])):V("",!0),l("div",{class:"controls-section mt-4"},[l("div",{class:"puzzle-controls"},[l("div",{class:"control-buttons d-flex justify-content-center gap-3 flex-wrap"},[l("button",{class:"btn btn-outline-warning",onClick:ze},[...e[14]||(e[14]=[l("i",{class:"fas fa-undo me-2"},null,-1),E("Reset ",-1)])]),l("button",{class:"btn btn-outline-info",onClick:Re},[...e[15]||(e[15]=[l("i",{class:"fas fa-lightbulb me-2"},null,-1),E("Hint ",-1)])]),l("button",{class:"btn btn-outline-success",onClick:_e},[...e[16]||(e[16]=[l("i",{class:"fas fa-check me-2"},null,-1),E("Check ",-1)])]),l("button",{class:"btn btn-warning",onClick:ye},[...e[17]||(e[17]=[l("i",{class:"fas fa-arrow-right me-2"},null,-1),E("Next ",-1)])])])])])])])])])]))}},fs=Be(vs,[["__scopeId","data-v-a60b3fe9"]]);export{fs as default};
