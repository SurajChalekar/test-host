import{_ as Te,r as p,c as Fe,o as Le,a as k,b as g,d as a,e as We,t as E,f as m,n as y,g as K,F as ee,h as se}from"./index-DlTmljfx.js";const Ee={class:"puzzles-page"},Oe={class:"puzzles-hero position-relative overflow-hidden"},Ue={class:"container position-relative z-3"},De={class:"row justify-content-center text-center"},Ve={class:"col-lg-8"},je={class:"hero-content py-5"},Ae={class:"hero-stats d-flex justify-content-center gap-4 flex-wrap"},He={class:"stat-item"},Ie={class:"stat-number"},Ge={class:"stat-item"},Je={class:"stat-number"},Xe={class:"puzzle-content py-5"},Ye={class:"container"},Ze={class:"row justify-content-center"},es={class:"col-lg-10"},ss={class:"puzzle-info-card mb-4"},ts={class:"row align-items-center"},as={key:0,class:"status-message mt-3 text-center"},ls={class:"chess-container"},os={class:"board-wrapper"},ns={class:"chess-board",ref:"chessBoard"},is=["onClick"],us=["data-piece"],cs={key:1,class:"move-indicator"},rs={class:"board-coordinates"},vs={class:"files"},ds={class:"ranks"},fs={key:0,class:"promotion-dialog-overlay"},ps={class:"promotion-dialog"},hs={class:"promotion-pieces"},ks={key:1,class:"game-end-overlay"},gs={class:"game-end-dialog"},bs={class:"game-end-icon"},ms={key:0,class:"fas fa-trophy"},ws={key:1,class:"fas fa-handshake"},Cs={class:"game-end-title"},Ps={key:0},_s={key:1},Ms={class:"game-end-subtitle"},zs={key:0},ys={key:1},Rs={key:2},Ss={__name:"PuzzlesMobile",setup(qs){const $=p(0),te=p(0),_=p(null),v=p(""),d=p(""),f=p(""),w=p("white"),Q=p([]),ae=p([]),R=p(!0),j=p(!1),A=p(!1),M=p(!1),B=p(!1),N=p(null),P=p(null),T=p(!1),F=p(null),z=p(null),b=p({whiteKingMoved:!1,blackKingMoved:!1,whiteKingsideRookMoved:!1,whiteQueensideRookMoved:!1,blackKingsideRookMoved:!1,blackQueensideRookMoved:!1}),me=["a","b","c","d","e","f","g","h"],we=[8,7,6,5,4,3,2,1],H=p([{id:1,title:"Checkmate in 2",description:"White to play and force checkmate in 2 moves.",difficulty:"Intermediate",theme:"Checkmate",rating:1200,board:["r","","b","q","k","","","r","p","p","p","","","p","p","p","","","n","","","n","","","","","","p","p","","","","","","","P","P","","","","","","N","","","N","","","P","P","P","","","P","P","P","R","","B","Q","K","B","","R"],solution:["Qd8+","Rxd8","Rxd8#"]},{id:2,title:"Fork Tactic",description:"Find the knight fork that wins material.",difficulty:"Beginner",theme:"Tactics",rating:900,board:["r","n","b","q","k","b","","r","p","p","p","p","","p","p","p","","","","","","n","","","","","","","p","","","","","","","","P","","","","","","N","","","","","","P","P","P","P","","P","P","P","R","","B","Q","K","B","N","R"],solution:["Nd5"]}]),le=Fe(()=>H.value[$.value]||H.value[0]),i=p([]),I=()=>{const s=le.value;i.value=[];for(let e=0;e<64;e++)i.value.push({piece:s.board[e]||null,selected:!1});w.value="white",Q.value=[],ae.value=[],R.value=!0,j.value=!1,A.value=!1,M.value=!1,B.value=!1,N.value=null,P.value=null,T.value=!1,F.value=null,z.value=null,b.value={whiteKingMoved:!1,blackKingMoved:!1,whiteKingsideRookMoved:!1,whiteQueensideRookMoved:!1,blackKingsideRookMoved:!1,blackQueensideRookMoved:!1}},S=s=>s&&s===s.toUpperCase(),G=s=>s&&s===s.toLowerCase(),oe=s=>s?w.value==="white"?S(s):G(s):!1,L=s=>{const e=Math.floor(s/8),t=s%8;return{row:e,col:t}},h=(s,e)=>s<0||s>7||e<0||e>7?-1:s*8+e,W=s=>i.value[s]&&i.value[s].piece!==null,O=(s,e)=>{const t=i.value[s]?.piece;return t?e?G(t):S(t):!1},ne=(s,e)=>{const t=i.value[s]?.piece;return t?e?S(t):G(t):!1},Ce=s=>{const e=s?"K":"k";for(let t=0;t<64;t++)if(i.value[t]?.piece===e)return t;return-1},ie=(s,e)=>{for(let t=0;t<64;t++){const l=i.value[t]?.piece;if(!l)continue;const o=S(l);if(o!==e)continue;const{row:u,col:c}=L(t);let n=[];switch(l.toLowerCase()){case"p":n.push(..._e(u,c,o));break;case"r":n.push(...J(u,c,o));break;case"n":n.push(...ve(u,c,o));break;case"b":n.push(...X(u,c,o));break;case"q":n.push(...de(u,c,o));break;case"k":n.push(...fe(u,c,o));break}if(n.some(r=>r.index===s))return!0}return!1},U=s=>{const e=Ce(s);return e===-1?!1:ie(e,!s)},Pe=s=>{for(let e=0;e<64;e++){const t=i.value[e]?.piece;if(!t||S(t)!==s)continue;if(pe(e).length>0)return!0}return!1},ue=()=>{const s=U(!0),e=U(!1);j.value=s,A.value=e;const t=w.value==="white";Pe(t)?s?(v.value+=" - White King in Check! ♔",d.value="alert-warning",f.value="fas fa-exclamation-triangle"):e&&(v.value+=" - Black King in Check! ♚",d.value="alert-warning",f.value="fas fa-exclamation-triangle"):t&&s?(M.value=!0,N.value="black",R.value=!1,v.value="♚ Checkmate! Black wins!",d.value="alert-danger",f.value="fas fa-trophy"):!t&&e?(M.value=!0,N.value="white",R.value=!1,v.value="♔ Checkmate! White wins!",d.value="alert-danger",f.value="fas fa-trophy"):(B.value=!0,R.value=!1,v.value="🤝 Stalemate! Draw!",d.value="alert-warning",f.value="fas fa-handshake")},ce=(s,e,t)=>{const l=i.value[s]?.piece,o=i.value[e]?.piece;i.value[s].piece=null,i.value[e].piece=l;const u=U(t);return i.value[s].piece=l,i.value[e].piece=o,u},_e=(s,e,t)=>{const l=[],o=t?-1:1,u=h(s+o,e-1);u!==-1&&l.push({index:u});const c=h(s+o,e+1);return c!==-1&&l.push({index:c}),l},re=(s,e,t)=>{const{row:l,col:o}=L(s);if(e){if(b.value.whiteKingMoved||t&&b.value.whiteKingsideRookMoved||!t&&b.value.whiteQueensideRookMoved)return!1}else if(b.value.blackKingMoved||t&&b.value.blackKingsideRookMoved||!t&&b.value.blackQueensideRookMoved)return!1;if(l!==(e?7:0)||o!==4)return!1;const n=h(l,t?7:0);if(i.value[n]?.piece!==(e?"R":"r"))return!1;const V=t?5:1,$e=t?6:3;for(let q=V;q<=$e;q++){const Z=h(l,q);if(W(Z))return!1}if(U(e))return!1;const Qe=4,Ne=t?6:2,be=t?1:-1;for(let q=Qe;q!==Ne+be;q+=be){const Z=h(l,q);if(ie(Z,!e))return!1}return!0},Me=(s,e)=>{const t=[],{row:l}=L(s);return re(s,e,!0)&&t.push({index:h(l,6),isCastling:!0,isKingside:!0}),re(s,e,!1)&&t.push({index:h(l,2),isCastling:!0,isKingside:!1}),t},ze=(s,e,t)=>{const l=[],o=t?-1:1,u=t?6:1,c=h(s+o,e);if(c!==-1&&!W(c)&&(l.push({index:c}),s===u)){const C=h(s+o*2,e);C!==-1&&!W(C)&&l.push({index:C,isDoublePawnMove:!0})}const n=h(s+o,e-1);n!==-1&&O(n,t)&&l.push({index:n});const r=h(s+o,e+1);if(r!==-1&&O(r,t)&&l.push({index:r}),P.value!==null){const C=Math.floor(P.value/8),V=P.value%8;s+o===C&&(e-1===V&&l.push({index:P.value,isEnPassant:!0}),e+1===V&&l.push({index:P.value,isEnPassant:!0}))}return l},J=(s,e,t)=>{const l=[],o=[[0,1],[0,-1],[1,0],[-1,0]];for(const[u,c]of o)for(let n=1;n<8;n++){const r=h(s+u*n,e+c*n);if(r===-1)break;if(!W(r))l.push({index:r});else{O(r,t)&&l.push({index:r});break}}return l},ve=(s,e,t)=>{const l=[],o=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[u,c]of o){const n=h(s+u,e+c);n!==-1&&!ne(n,t)&&l.push({index:n})}return l},X=(s,e,t)=>{const l=[],o=[[1,1],[1,-1],[-1,1],[-1,-1]];for(const[u,c]of o)for(let n=1;n<8;n++){const r=h(s+u*n,e+c*n);if(r===-1)break;if(!W(r))l.push({index:r});else{O(r,t)&&l.push({index:r});break}}return l},de=(s,e,t)=>[...J(s,e,t),...X(s,e,t)],fe=(s,e,t)=>{const l=[],o=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];for(const[u,c]of o){const n=h(s+u,e+c);n!==-1&&!ne(n,t)&&l.push({index:n})}return l},pe=s=>{const e=i.value[s]?.piece;if(!e)return[];const{row:t,col:l}=L(s),o=S(e);let u=[];switch(e.toLowerCase()){case"p":u.push(...ze(t,l,o));break;case"r":u.push(...J(t,l,o));break;case"n":u.push(...ve(t,l,o));break;case"b":u.push(...X(t,l,o));break;case"q":u.push(...de(t,l,o));break;case"k":u.push(...fe(t,l,o)),u.push(...Me(s,o));break}return u.filter(n=>!ce(s,n.index,o)).filter(n=>n.index>=0&&n.index<64)},he=s=>{const e=pe(s);Q.value=e},Y=s=>Q.value.some(e=>e.index===s),ye=s=>{const e=Math.floor(s/8),t=s%8,l=(e+t)%2===0;let o=["chess-square"];o.push(l?"light-square":"dark-square"),i.value[s].selected&&o.push("selected-square"),Y(s)&&o.push("valid-move-square");const u=i.value[s]?.piece;return(u==="K"&&j.value||u==="k"&&A.value)&&o.push("king-in-check"),o},Re=s=>s?s===s.toUpperCase()?"white-piece":"black-piece":"",Se=(s,e)=>{e==="K"?b.value.whiteKingMoved=!0:e==="k"?b.value.blackKingMoved=!0:e==="R"?(s===63&&(b.value.whiteKingsideRookMoved=!0),s===56&&(b.value.whiteQueensideRookMoved=!0)):e==="r"&&(s===7&&(b.value.blackKingsideRookMoved=!0),s===0&&(b.value.blackQueensideRookMoved=!0))},qe=(s,e)=>{const t=i.value[s].piece,l=i.value[e].piece,o=Q.value.find(c=>c.index===e),u=S(t);if(ce(s,e,u)){v.value="⚠️ Illegal move! This would leave your king in check.",d.value="alert-danger",f.value="fas fa-ban",x();return}if(Se(s,t),P.value,P.value=null,o?.isEnPassant){const n=e+(u?1:-1)*8,r=i.value[n].piece;i.value[s].piece=null,i.value[e].piece=t,i.value[n].piece=null,v.value=`En passant! ${t.toUpperCase()} captures ${r.toUpperCase()}`,d.value="alert-success",f.value="fas fa-chess-pawn"}else if(o?.isCastling){const{row:c}=L(s);if(i.value[s].piece=null,i.value[e].piece=t,o.isKingside){const n=h(c,7),r=h(c,5),C=i.value[n].piece;i.value[n].piece=null,i.value[r].piece=C,v.value="♔ Castled kingside! O-O",d.value="alert-success",f.value="fas fa-chess-rook"}else{const n=h(c,0),r=h(c,3),C=i.value[n].piece;i.value[n].piece=null,i.value[r].piece=C,v.value="♔ Castled queenside! O-O-O",d.value="alert-success",f.value="fas fa-chess-rook"}}else{if(t.toLowerCase()==="p"&&o?.isDoublePawnMove){const n=u?1:-1;P.value=e+n*8}i.value[s].piece=null,i.value[e].piece=t;const c=Math.floor(e/8);if(t.toLowerCase()==="p"&&(c===0||c===7)){T.value=!0,F.value=e,z.value=u,R.value=!1,v.value="👑 Choose a piece for promotion!",d.value="alert-info",f.value="fas fa-crown";return}l?(v.value=`${t.toUpperCase()} captures ${l.toUpperCase()}!`,d.value="alert-success",f.value="fas fa-times"):(v.value=`${w.value==="white"?"Black":"White"} to move`,d.value="alert-info",f.value="fas fa-chess")}ae.value.push({from:s,to:e,piece:t,captured:l,turn:w.value,castling:o?.isCastling||!1,enPassant:o?.isEnPassant||!1}),x(),w.value=w.value==="white"?"black":"white",ue()},Ke=s=>{if(!R.value||T.value)return;const e=i.value[s];_.value===null?e.piece&&oe(e.piece)?(_.value=s,e.selected=!0,he(s),v.value=`${w.value==="white"?"White":"Black"} to move`,d.value="alert-info",f.value="fas fa-chess"):e.piece&&(v.value=`It's ${w.value}'s turn!`,d.value="alert-warning",f.value="fas fa-exclamation-triangle"):_.value===s?x():Y(s)?qe(_.value,s):e.piece&&oe(e.piece)?(x(),_.value=s,e.selected=!0,he(s)):(v.value="Invalid move! Try again.",d.value="alert-danger",f.value="fas fa-times")},x=()=>{_.value!==null&&(i.value[_.value].selected=!1),_.value=null,Q.value=[]},ke=()=>{x(),I(),v.value="Puzzle reset! White to move.",d.value="alert-info",f.value="fas fa-undo"},Be=()=>{const s=le.value.solution[0];v.value=`Hint: Try ${s}`,d.value="alert-info",f.value="fas fa-lightbulb"},xe=()=>{v.value="Good move! Keep going...",d.value="alert-success",f.value="fas fa-check-circle"},ge=()=>{$.value<H.value.length-1?$.value++:$.value=0,x(),I(),v.value="New puzzle loaded! White to move.",d.value="alert-success",f.value="fas fa-puzzle-piece",te.value++},D=s=>{if(F.value===null)return;const e=z.value?s.toUpperCase():s.toLowerCase();i.value[F.value].piece=e,T.value=!1,R.value=!0,v.value=`Pawn promoted to ${s.toUpperCase()}! 👑`,d.value="alert-success",f.value="fas fa-crown",F.value=null,z.value=null,w.value=w.value==="white"?"black":"white",ue()};return Le(()=>{document.title="IISER-TVM Chess Club - Puzzles",I(),v.value="White to move. Select a piece to start!",d.value="alert-info",f.value="fas fa-chess"}),(s,e)=>(g(),k("div",Ee,[a("section",Oe,[e[7]||(e[7]=a("div",{class:"hero-background"},null,-1)),e[8]||(e[8]=a("div",{class:"chess-pattern-bg"},null,-1)),a("div",Ue,[a("div",De,[a("div",Ve,[a("div",je,[e[6]||(e[6]=We('<div class="hero-badge mb-4" data-v-3a1b2ada><span class="badge bg-gradient-warning px-4 py-3 fs-6 rounded-pill" data-v-3a1b2ada><i class="fas fa-brain me-2" data-v-3a1b2ada></i>Mind Sharpening Challenges </span></div><h1 class="hero-title mb-4" data-v-3a1b2ada><span class="chess-icon" data-v-3a1b2ada>🧩</span><span class="text-glow" data-v-3a1b2ada>Chess Puzzles</span></h1><p class="hero-subtitle mb-4" data-v-3a1b2ada> Test your tactical prowess with mind-bending puzzles. Every move matters, every solution reveals mastery. </p>',3)),a("div",Ae,[a("div",He,[a("div",Ie,E($.value+1),1),e[4]||(e[4]=a("div",{class:"stat-label"},"Current Puzzle",-1))]),a("div",Ge,[a("div",Je,E(te.value),1),e[5]||(e[5]=a("div",{class:"stat-label"},"Solved",-1))])])])])])])]),a("section",Xe,[a("div",Ye,[a("div",Ze,[a("div",es,[a("div",ss,[a("div",ts,[v.value?(g(),k("div",as,[a("div",{class:y([d.value,"alert"])},[a("i",{class:y([f.value,"me-2"])},null,2),K(E(v.value),1)],2)])):m("",!0)]),a("div",ls,[a("div",os,[a("div",ns,[(g(!0),k(ee,null,se(i.value,(t,l)=>(g(),k("div",{key:l,class:y(ye(l)),onClick:o=>Ke(l)},[t.piece?(g(),k("div",{key:0,class:y([Re(t.piece),"chess-piece"]),"data-piece":t.piece},null,10,us)):m("",!0),Y(l)?(g(),k("div",cs)):m("",!0)],10,is))),128))],512),a("div",rs,[a("div",vs,[(g(),k(ee,null,se(me,t=>a("span",{key:t,class:"file-label"},E(t),1)),64))]),a("div",ds,[(g(),k(ee,null,se(we,t=>a("span",{key:t,class:"rank-label"},E(t),1)),64))])])])])]),T.value?(g(),k("div",fs,[a("div",ps,[e[13]||(e[13]=a("h3",{class:"text-center mb-3"},"Choose Promotion Piece",-1)),a("div",hs,[a("button",{onClick:e[0]||(e[0]=t=>D("q")),class:"promotion-btn"},[a("div",{class:y([z.value?"white-piece":"black-piece","promotion-piece"])},"♕",2),e[9]||(e[9]=a("span",null,"Queen",-1))]),a("button",{onClick:e[1]||(e[1]=t=>D("r")),class:"promotion-btn"},[a("div",{class:y([z.value?"white-piece":"black-piece","promotion-piece"])},"♖",2),e[10]||(e[10]=a("span",null,"Rook",-1))]),a("button",{onClick:e[2]||(e[2]=t=>D("b")),class:"promotion-btn"},[a("div",{class:y([z.value?"white-piece":"black-piece","promotion-piece"])},"♗",2),e[11]||(e[11]=a("span",null,"Bishop",-1))]),a("button",{onClick:e[3]||(e[3]=t=>D("n")),class:"promotion-btn"},[a("div",{class:y([z.value?"white-piece":"black-piece","promotion-piece"])},"♘",2),e[12]||(e[12]=a("span",null,"Knight",-1))])])])])):m("",!0),M.value||B.value?(g(),k("div",ks,[a("div",gs,[a("div",bs,[M.value?(g(),k("i",ms)):m("",!0),B.value?(g(),k("i",ws)):m("",!0)]),a("h2",Cs,[M.value?(g(),k("span",Ps,"Checkmate!")):m("",!0),B.value?(g(),k("span",_s,"Stalemate!")):m("",!0)]),a("p",Ms,[M.value&&N.value==="white"?(g(),k("span",zs,"♔ White Wins!")):m("",!0),M.value&&N.value==="black"?(g(),k("span",ys,"♚ Black Wins!")):m("",!0),B.value?(g(),k("span",Rs,"It's a Draw!")):m("",!0)]),a("div",{class:"game-end-buttons"},[a("button",{onClick:ke,class:"btn btn-light btn-lg"},[...e[14]||(e[14]=[a("i",{class:"fas fa-redo me-2"},null,-1),K("Play Again ",-1)])]),a("button",{onClick:ge,class:"btn btn-warning btn-lg"},[...e[15]||(e[15]=[a("i",{class:"fas fa-arrow-right me-2"},null,-1),K("Next Puzzle ",-1)])])])])])):m("",!0),a("div",{class:"controls-section mt-4"},[a("div",{class:"puzzle-controls"},[a("div",{class:"control-buttons d-flex justify-content-center gap-3 flex-wrap"},[a("button",{class:"btn btn-outline-warning",onClick:ke},[...e[16]||(e[16]=[a("i",{class:"fas fa-undo me-2"},null,-1),K("Reset ",-1)])]),a("button",{class:"btn btn-outline-info",onClick:Be},[...e[17]||(e[17]=[a("i",{class:"fas fa-lightbulb me-2"},null,-1),K("Hint ",-1)])]),a("button",{class:"btn btn-outline-success",onClick:xe},[...e[18]||(e[18]=[a("i",{class:"fas fa-check me-2"},null,-1),K("Check ",-1)])]),a("button",{class:"btn btn-warning",onClick:ge},[...e[19]||(e[19]=[a("i",{class:"fas fa-arrow-right me-2"},null,-1),K("Next ",-1)])])])])])])])])])]))}},Bs=Te(Ss,[["__scopeId","data-v-3a1b2ada"]]);export{Bs as default};
